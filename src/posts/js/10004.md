---
lang: zh-CN
title: throttle 节流函数
category:
    - JavaScript
tag:
    - 性能优化
order: 4
---

## 概述
- 当事件触发时，回调函数 `callbackFn` 立即执行
- 当事件触发后，等待一段时间才会再次执行回调函数 `callbackFn`
- 当事件被频繁触发时，节流函数 `throttle` 表现为按一定频率执行

## 实现
```js
function throttle(callbackFn, interval, leading = false) {
    let nowTime
    let lastTime = 0

    function _throttle(...args) {
        nowTime = new Date().getTime()

        if (!leading && lastTime === 0) {
            lastTime = nowTime
        }

        if (nowTime - lastTime > interval) {
            callbackFn.apply(this, args)
            lastTime = nowTime
        }
    }

    return _throttle
}
```

## 示例
```js
const handleMove = (e) => {
    console.log('Move!', e, this)
}
// 间隔 300ms ，不立即执行
document.onmousemove = throttle(handleMove, 300, false)
```
