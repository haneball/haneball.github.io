---
lang: zh-CN
title: 实现 Array 的原生方法
category:
    - JavaScript
tag:
    - 原生方法
order: 2
---

## forEach 方法

- 挂载到 `Array` 对象的原型 `prototype` 上
- 参数有 `callbackFn` 和 `that`
- `callbackFn` 的类型为 `Function`，且有 3 个参数
- 返回 `undefined`

```js
Array.prototype.myForEach = function(callbackFn, that) {
    if (typeof callbackFn !== 'function') {
        throw new Error('callbackFn must be function')
    }

    that = that || this
    const len = this.length

    fot (let i = 0; i < len; i ++) {
        callbackFn.call(that, this[i], i, this)
    }
}
```

<!-- more -->

## map 方法

- 挂载到 `Array` 对象的原型 `prototype` 上
- 参数有 `callbackFn` 和 `that`
- `callbackFn` 的类型为 `Function`，且有 3 个参数
- 返回结果的类型为数组 `Array`，每个元素都为 `callbackFn` 的返回值

```js
Array.prototype.myMap = function(callbackFn, that) {
    if (typeof callbackFn !== 'function') {
        throw new Error('callbackFn must be function')
    }

    that = that || this
    const result = []
    const len = this.length

    for (let i = 0; i < len; i++) {
        result.push(callbackFn.call(that, this[i], i, this))
    }

    return result
}
```

## filter 方法

- 挂载到 `Array` 对象的原型 `prototype` 上
- 参数有 `callbackFn` 和 `that`
- `callbackFn` 的类型为 `Function`，且有 3 个参数
- 返回结果的类型为数组 `Array`，为符合 `callbackFn` 测试条件的所有元素，且均为浅拷贝

```js
Array.prototype.myFilter = function(callbackFn, that) {
    if (typeof callbackFn !== 'function') {
        throw new Error('callbackFn must be function')
    }

    that = that || this
    const result = []
    const len = this.length

    for (let i = 0; i < len; i++) {
        if (callbackFn.call(that, this[i], i, this)) {
            if (typeof this[i] === 'object') {
                result.push(Object.create(this[i]))
            } else {
                result.push(this[i])
            }
        }
    }

    return arr
}
```
